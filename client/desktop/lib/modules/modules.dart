import '../modules/system.dart';
import '../util/manipulate_data.dart';

class Modules {
  System _system = System();


  Future<Map?> selectorFromMap(Map map) async {
    if (map != null &&
        map.containsKey('id') &&
        map['id'].toString().isNotEmpty &&
        ManipulateData.isInt(map['id'])) {
      var id = int.parse(map['id']);
      switch (id) {
        case 1:
          return getInfo();
        case 2:
          var parameter = map['parameter'].toString();

          var retn = await executableCommand(parameter);
          return retn;
        case 3:
          var parameter = map['parameter'].toString();

          var retn = await executableCommandInPowerShell(parameter);
          return retn;
        case 4:
          var parameter = map['parameter'].toString();

          if (ManipulateData.isInt(parameter)) {
            var retn = await killProcess(int.parse(parameter));
            return retn;
          }
          return {'status': false, 'response': 'parameter is not a int'};
      }
    }
  }

  Map getInfo() {
    return _system.getInfoFromSystem();
  }

  Future<Map> executableCommand(String command) {
    return _system.executableCommand(command);
  }

  Future<Map> executableCommandInPowerShell(String command) {
    return _system.executableCommandInPowerShell(command);
  }

  Future<Map> killProcess(int pId) {
    return _system.killProcess(pId);
  }

}
